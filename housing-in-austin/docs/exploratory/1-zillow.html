<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>MUSA 550 Quarto Template - Data Transformation and Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Data Transformation and Analysis</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/austin2.jpg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://nickhand.dev" rel="" title="Personal Website" class="quarto-navigation-tool px-1" aria-label="Personal Website"><i class="bi bi-globe"></i></a>
    <a href="https://github.com/MUSA-550-Fall-2023/" rel="" title="MUSA 550 GitHub" class="quarto-navigation-tool px-1" aria-label="MUSA 550 GitHub"><i class="bi bi-github"></i></a>
    <a href="https://twitter.com/nicholashand" rel="" title="Nick Hand Twitter" class="quarto-navigation-tool px-1" aria-label="Nick Hand Twitter"><i class="bi bi-twitter"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../datamethodpage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data and Methodology</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../exploratory/index_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Exploration</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../Modeling/index_ex2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Random Forest Model</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/1-modelbuild.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modeling</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conclusion</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#zillow-data" id="toc-zillow-data" class="nav-link active" data-scroll-target="#zillow-data">1. Zillow Data</a>
  <ul class="collapse">
  <li><a href="#web-scrape-housing-lists-on-zillow" id="toc-web-scrape-housing-lists-on-zillow" class="nav-link" data-scroll-target="#web-scrape-housing-lists-on-zillow">1.1 Web scrape housing lists on Zillow</a></li>
  <li><a href="#geocoding-for-zillow-address" id="toc-geocoding-for-zillow-address" class="nav-link" data-scroll-target="#geocoding-for-zillow-address">1.2 Geocoding for Zillow Address</a></li>
  <li><a href="#exploratory-analysis-on-zillow-housing" id="toc-exploratory-analysis-on-zillow-housing" class="nav-link" data-scroll-target="#exploratory-analysis-on-zillow-housing">1.3 Exploratory Analysis on Zillow Housing</a></li>
  </ul></li>
  <li><a href="#tract-data" id="toc-tract-data" class="nav-link" data-scroll-target="#tract-data">2. Tract Data</a></li>
  <li><a href="#census-and-demographic-data" id="toc-census-and-demographic-data" class="nav-link" data-scroll-target="#census-and-demographic-data">3. Census and Demographic Data</a>
  <ul class="collapse">
  <li><a href="#median-income" id="toc-median-income" class="nav-link" data-scroll-target="#median-income">3.1 Median Income</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/MUSA-550-Fall-2023/quarto-website-template/blob/main/exploratory/1-zillow.ipynb" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Transformation and Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="zillow-data" class="level2">
<h2 class="anchored" data-anchor-id="zillow-data">1. Zillow Data</h2>
<section id="web-scrape-housing-lists-on-zillow" class="level3">
<h3 class="anchored" data-anchor-id="web-scrape-housing-lists-on-zillow">1.1 Web scrape housing lists on Zillow</h3>
<p>To obtain housing prices and other fundamental housing characteristics, we performed web scraping on Zillow’s housing listings near the City of Austin. This involved extracting information such as price, address, size, and amenities for each housing item. The gathered data was then stored in a local CSV file, resulting in a dataset with a size of xxxx.</p>
<div class="cell" data-execution_count="18">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#! echo: true</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#! code-fold: true</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.common.by <span class="im">import</span> By</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> time <span class="im">import</span> sleep</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># DATA 1 : Zillow Housing Data</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>base_url <span class="op">=</span> <span class="st">'https://www.zillow.com/austin-tx/'</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>driver.get(base_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#! echo: true</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#! code-fold: true</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>address <span class="op">=</span> driver.find_elements(By.XPATH,<span class="st">'//address'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>price <span class="op">=</span> driver.find_elements(By.XPATH, <span class="st">'//div[@class="StyledPropertyCardDataArea-c11n-8-84-3__sc-yipmu-0 fDSTNn"]//span[@data-test="property-card-price"]'</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>area <span class="op">=</span> driver.find_elements(By.XPATH, <span class="st">'//div[@class="StyledPropertyCardDataArea-c11n-8-84-3__sc-yipmu-0 dbDWjx"]/ul/li[3]/b'</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>bath <span class="op">=</span> driver.find_elements(By.XPATH, <span class="st">'//div[@class="StyledPropertyCardDataArea-c11n-8-84-3__sc-yipmu-0 dbDWjx"]/ul/li[2]/b'</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> driver.find_elements(By.XPATH, <span class="st">'//div[@class="StyledPropertyCardDataArea-c11n-8-84-3__sc-yipmu-0 dbDWjx"]/ul/li[1]/b'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>address_scraped<span class="op">=</span>[]</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>price_scraped<span class="op">=</span>[]</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>area_scraped <span class="op">=</span> []</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>bath_scraped <span class="op">=</span> []</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>bed_scraped <span class="op">=</span> []</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> result <span class="kw">in</span> address:</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    address_scraped.append(result.text)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> result <span class="kw">in</span> price:</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    price_scraped.append(result.text)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> result <span class="kw">in</span> area:</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    area_scraped.append(result.text)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> result <span class="kw">in</span> bath:</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    bath_scraped.append(result.text)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> result <span class="kw">in</span> bed:</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    bed_scraped.append(result.text)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"zillow2.csv"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"Address; Price; Area; Bath; Bed</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(address_scraped)):</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">"zillow2.csv"</span>, <span class="st">"a"</span>) <span class="im">as</span> f:</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="bu">str</span>(address_scraped[i])<span class="op">+</span><span class="st">"; "</span><span class="op">+</span><span class="bu">str</span>(price_scraped[i])<span class="op">+</span><span class="st">"; "</span><span class="op">+</span><span class="bu">str</span>(area_scraped[i])<span class="op">+</span><span class="st">"; "</span><span class="op">+</span><span class="bu">str</span>(bath_scraped[i])<span class="op">+</span><span class="st">"; "</span><span class="op">+</span><span class="bu">str</span>(bed_scraped[i])<span class="op">+</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-tags="[]" data-execution_count="21">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#! echo: true</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#! code-fold: true</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>housing <span class="op">=</span> pandas.read_csv(<span class="st">"zillow2.csv"</span>, delimiter<span class="op">=</span><span class="st">";"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>housing.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Address</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Area</th>
<th data-quarto-table-cell-role="th">Bath</th>
<th data-quarto-table-cell-role="th">Bed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>3504 Black Granite Dr, Austin, TX 78744</td>
<td>$350,000</td>
<td>1,463</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>7601 Daffan Lane #047 Plan, Oak Crest</td>
<td>$109,995+</td>
<td>1,216</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>9717 Meadowheath Dr, Austin, TX 78729</td>
<td>$339,900</td>
<td>1,420</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10506 Little Pebble Dr #A, Austin, TX 78758</td>
<td>$323,000</td>
<td>1,069</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1618 Lawnside Rd, San Antonio, TX 78245</td>
<td>$374,998</td>
<td>2,451</td>
<td>3</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>4509 Kind Way, Austin, TX 78725</td>
<td>$279,000</td>
<td>1,302</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>9017 Frostwood Trl, Austin, TX 78729</td>
<td>$450,000</td>
<td>2,709</td>
<td>3</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1600 S 1st St #315, Austin, TX 78704</td>
<td>$194,898</td>
<td>435</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>2512 Sunny Hills Dr #27, Austin, TX 78744</td>
<td>$124,900</td>
<td>1,568</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>2124 Burton Dr APT 127, Austin, TX 78741</td>
<td>$169,900</td>
<td>802</td>
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="geocoding-for-zillow-address" class="level3">
<h3 class="anchored" data-anchor-id="geocoding-for-zillow-address">1.2 Geocoding for Zillow Address</h3>
<p>Next, we perform geocoding using geocoders for the scraped addresses to obtain the locations and coordinates of each housing unit. This step is essential for preparing the data for future spatial analysis. After geocoding and tranformations based on the addresses, we acquired a dataset with coordiantes. In the process there were some data loss since the Open Street Map couldn’t find location matches with some addresses.</p>
<div class="cell" data-tags="[]" data-execution_count="22">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#! code-fold: true</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geopy.geocoders <span class="im">import</span> Nominatim</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>nom <span class="op">=</span> Nominatim(user_agent<span class="op">=</span><span class="st">"housing"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>housing[<span class="st">"coordinates"</span>] <span class="op">=</span> housing[<span class="st">"Address"</span>].<span class="bu">apply</span>(nom.geocode)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>housing[<span class="st">"longitude"</span>] <span class="op">=</span> housing[<span class="st">"coordinates"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:x.longitude <span class="cf">if</span> x <span class="op">!=</span> <span class="va">None</span> <span class="cf">else</span> <span class="va">None</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>housing[<span class="st">"latitude"</span>] <span class="op">=</span> housing[<span class="st">"coordinates"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:x.latitude <span class="cf">if</span> x <span class="op">!=</span> <span class="va">None</span> <span class="cf">else</span> <span class="va">None</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>geometry <span class="op">=</span> gpd.points_from_xy(housing[<span class="st">"longitude"</span>], housing[<span class="st">"latitude"</span>])</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>housing_geo <span class="op">=</span> gpd.GeoDataFrame(housing, geometry<span class="op">=</span>geometry)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>housing_geo.columns <span class="op">=</span> housing_geo.columns.<span class="bu">str</span>.strip()</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#to float</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>housing_geo[<span class="st">"price"</span>] <span class="op">=</span> housing_geo[<span class="st">"Price"</span>].replace(<span class="st">'[\$,+]'</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>).astype(<span class="bu">float</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>housing_geo[<span class="st">"area"</span>] <span class="op">=</span> housing_geo[<span class="st">"Area"</span>].replace(<span class="st">"[\,]"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>).astype(<span class="bu">float</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>housing_geo[<span class="st">"bed"</span>] <span class="op">=</span> housing_geo[<span class="st">"Bed"</span>].astype(<span class="bu">float</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>housing_geo[<span class="st">"bath"</span>] <span class="op">=</span> housing_geo[<span class="st">"Bath"</span>].astype(<span class="bu">float</span>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>housing_geo.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Address</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Area</th>
<th data-quarto-table-cell-role="th">Bath</th>
<th data-quarto-table-cell-role="th">Bed</th>
<th data-quarto-table-cell-role="th">coordinates</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">area</th>
<th data-quarto-table-cell-role="th">bed</th>
<th data-quarto-table-cell-role="th">bath</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>3504 Black Granite Dr, Austin, TX 78744</td>
<td>$350,000</td>
<td>1,463</td>
<td>2</td>
<td>3</td>
<td>(3504, Black Granite Drive, Colorado Crossing,...</td>
<td>-97.697120</td>
<td>30.202828</td>
<td>POINT (-97.69712 30.20283)</td>
<td>350000.0</td>
<td>1463.0</td>
<td>3.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>7601 Daffan Lane #047 Plan, Oak Crest</td>
<td>$109,995+</td>
<td>1,216</td>
<td>2</td>
<td>3</td>
<td>None</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
<td>109995.0</td>
<td>1216.0</td>
<td>3.0</td>
<td>2.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>9717 Meadowheath Dr, Austin, TX 78729</td>
<td>$339,900</td>
<td>1,420</td>
<td>2</td>
<td>3</td>
<td>(9717, Meadowheath Drive, Austin, Williamson C...</td>
<td>-97.785724</td>
<td>30.459727</td>
<td>POINT (-97.78572 30.45973)</td>
<td>339900.0</td>
<td>1420.0</td>
<td>3.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10506 Little Pebble Dr #A, Austin, TX 78758</td>
<td>$323,000</td>
<td>1,069</td>
<td>2</td>
<td>3</td>
<td>None</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
<td>323000.0</td>
<td>1069.0</td>
<td>3.0</td>
<td>2.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1618 Lawnside Rd, San Antonio, TX 78245</td>
<td>$374,998</td>
<td>2,451</td>
<td>3</td>
<td>4</td>
<td>None</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
<td>374998.0</td>
<td>2451.0</td>
<td>4.0</td>
<td>3.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>4509 Kind Way, Austin, TX 78725</td>
<td>$279,000</td>
<td>1,302</td>
<td>3</td>
<td>3</td>
<td>(4509, Kind Way, Chaparral Crossing, Austin, T...</td>
<td>-97.573388</td>
<td>30.237360</td>
<td>POINT (-97.57339 30.23736)</td>
<td>279000.0</td>
<td>1302.0</td>
<td>3.0</td>
<td>3.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>9017 Frostwood Trl, Austin, TX 78729</td>
<td>$450,000</td>
<td>2,709</td>
<td>3</td>
<td>4</td>
<td>(9017, Frostwood Trail, Austin, Williamson Cou...</td>
<td>-97.774245</td>
<td>30.459452</td>
<td>POINT (-97.77425 30.45945)</td>
<td>450000.0</td>
<td>2709.0</td>
<td>4.0</td>
<td>3.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1600 S 1st St #315, Austin, TX 78704</td>
<td>$194,898</td>
<td>435</td>
<td>1</td>
<td>1</td>
<td>None</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
<td>194898.0</td>
<td>435.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>2512 Sunny Hills Dr #27, Austin, TX 78744</td>
<td>$124,900</td>
<td>1,568</td>
<td>2</td>
<td>3</td>
<td>None</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
<td>124900.0</td>
<td>1568.0</td>
<td>3.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>2124 Burton Dr APT 127, Austin, TX 78741</td>
<td>$169,900</td>
<td>802</td>
<td>2</td>
<td>2</td>
<td>None</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
<td>169900.0</td>
<td>802.0</td>
<td>2.0</td>
<td>2.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="exploratory-analysis-on-zillow-housing" class="level3">
<h3 class="anchored" data-anchor-id="exploratory-analysis-on-zillow-housing">1.3 Exploratory Analysis on Zillow Housing</h3>
<p>After condcuting some exploratory analysis on</p>
<div class="cell" data-tags="[]" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#! echo: true</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#! code-fold: true</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="op">=</span>  [<span class="st">'price'</span>, <span class="st">'area'</span>, <span class="st">'bed'</span>, <span class="st">'Address'</span>]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> alt.Chart(housing_geo[selected_columns]).mark_circle().encode(</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">'price:Q'</span>, axis<span class="op">=</span>alt.Axis(title<span class="op">=</span><span class="st">'Price'</span>)),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>alt.Y(<span class="st">'area:Q'</span>, axis<span class="op">=</span>alt.Axis(title<span class="op">=</span><span class="st">'Size'</span>)),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>alt.Color(<span class="st">'bed:Q'</span>, legend<span class="op">=</span>alt.Legend(title<span class="op">=</span><span class="st">'Bedrooms'</span>)),</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    tooltip<span class="op">=</span>[<span class="st">'price:Q'</span>, <span class="st">'area:Q'</span>, <span class="st">'bed:Q'</span>, <span class="st">'Address:N'</span>]</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="dv">600</span>, height<span class="op">=</span><span class="dv">400</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>chart.interactive()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="6">

<style>
  #altair-viz-ff6c867740cb49c9b2f770135c543ffe.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-ff6c867740cb49c9b2f770135c543ffe.vega-embed details,
  #altair-viz-ff6c867740cb49c9b2f770135c543ffe.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-ff6c867740cb49c9b2f770135c543ffe"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-ff6c867740cb49c9b2f770135c543ffe") {
      outputDiv = document.getElementById("altair-viz-ff6c867740cb49c9b2f770135c543ffe");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.14.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.14.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-21590948c332fa9bef27dc9b5b2a0e9f"}, "mark": {"type": "circle"}, "encoding": {"color": {"field": "bed", "legend": {"title": "Bedrooms"}, "type": "quantitative"}, "tooltip": [{"field": "price", "type": "quantitative"}, {"field": "area", "type": "quantitative"}, {"field": "bed", "type": "quantitative"}, {"field": "Address", "type": "nominal"}], "x": {"axis": {"title": "Price"}, "field": "price", "type": "quantitative"}, "y": {"axis": {"title": "Size"}, "field": "area", "type": "quantitative"}}, "height": 400, "params": [{"name": "param_1", "select": {"type": "interval", "encodings": ["x", "y"]}, "bind": "scales"}], "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v5.14.1.json", "datasets": {"data-21590948c332fa9bef27dc9b5b2a0e9f": [{"price": 350000.0, "area": 1463.0, "bed": 3.0, "Address": "3504 Black Granite Dr, Austin, TX 78744"}, {"price": 109995.0, "area": 1216.0, "bed": 3.0, "Address": "7601 Daffan Lane #047 Plan, Oak Crest"}, {"price": 339900.0, "area": 1420.0, "bed": 3.0, "Address": "9717 Meadowheath Dr, Austin, TX 78729"}, {"price": 323000.0, "area": 1069.0, "bed": 3.0, "Address": "10506 Little Pebble Dr #A, Austin, TX 78758"}, {"price": 374998.0, "area": 2451.0, "bed": 4.0, "Address": "1618 Lawnside Rd, San Antonio, TX 78245"}, {"price": 279000.0, "area": 1302.0, "bed": 3.0, "Address": "4509 Kind Way, Austin, TX 78725"}, {"price": 450000.0, "area": 2709.0, "bed": 4.0, "Address": "9017 Frostwood Trl, Austin, TX 78729"}, {"price": 194898.0, "area": 435.0, "bed": 1.0, "Address": "1600 S 1st St #315, Austin, TX 78704"}, {"price": 124900.0, "area": 1568.0, "bed": 3.0, "Address": "2512 Sunny Hills Dr #27, Austin, TX 78744"}, {"price": 169900.0, "area": 802.0, "bed": 2.0, "Address": "2124 Burton Dr APT 127, Austin, TX 78741"}, {"price": 379999.0, "area": 2345.0, "bed": 4.0, "Address": "3300 Barksdale Dr, Austin, TX 78725"}, {"price": 194000.0, "area": 535.0, "bed": 2.0, "Address": "2500 Burleson Rd APT 618, Austin, TX 78741"}, {"price": 299999.0, "area": 1464.0, "bed": 3.0, "Address": "14920 Ben Davis Dr, Austin, TX 78725"}, {"price": 495000.0, "area": 1301.0, "bed": 3.0, "Address": "7303 Glenhill Rd, Austin, TX 78752"}, {"price": 359000.0, "area": 1551.0, "bed": 4.0, "Address": "5405 Teri Rd, Austin, TX 78744"}, {"price": 275000.0, "area": 1346.0, "bed": 3.0, "Address": "4511 Inicio Ln #356, Austin, TX 78725"}, {"price": 265000.0, "area": 1302.0, "bed": 3.0, "Address": "4502 Kind Way, Austin, TX 78725"}, {"price": 259900.0, "area": 1084.0, "bed": 2.0, "Address": "8517 Deja Ave, Austin, TX 78747"}, {"price": 350000.0, "area": 1610.0, "bed": 3.0, "Address": "14917 Babbling Brook Drive, Austin, TX 78728"}, {"price": 249400.0, "area": 764.0, "bed": 2.0, "Address": "4700 Prock Ln #A, Austin, TX 78721"}, {"price": 470000.0, "area": 1196.0, "bed": 3.0, "Address": "400 Philco Dr, Austin, TX 78745"}, {"price": 250000.0, "area": 1080.0, "bed": 3.0, "Address": "5921 Little Creek Trl, Austin, TX 78744"}, {"price": 689000.0, "area": 1793.0, "bed": 3.0, "Address": "7002 Whispering Creek Dr, Austin, TX 78736"}, {"price": 425000.0, "area": 954.0, "bed": 2.0, "Address": "1212 Guadalupe St APT 505, Austin, TX 78701"}, {"price": 495000.0, "area": 2268.0, "bed": 4.0, "Address": "7337 Menchaca Rd #19, Austin, TX 78745"}, {"price": 299000.0, "area": 1643.0, "bed": 3.0, "Address": "5613 Kleberg Trl, Austin, TX 78747"}, {"price": 580000.0, "area": 2620.0, "bed": 6.0, "Address": "1203 Radcliff Dr, Austin, TX 78752"}, {"price": 300000.0, "area": 1034.0, "bed": 2.0, "Address": "12318 Marogot Run, Austin, TX 78758"}, {"price": 380000.0, "area": 994.0, "bed": 3.0, "Address": "1108 Austin Highlands Blvd, Austin, TX 78745"}, {"price": 505000.0, "area": 1656.0, "bed": 4.0, "Address": "5205 Calais Ct, Austin, TX 78745"}, {"price": 350000.0, "area": 1615.0, "bed": 2.0, "Address": "11310 Spicewood Club Dr APT 2, Austin, TX 78750"}, {"price": 439900.0, "area": 2386.0, "bed": 7.0, "Address": "10511 Man O War Ave, Austin, TX 78719"}, {"price": 699000.0, "area": 2673.0, "bed": 3.0, "Address": "2316 Rio Mesa Dr, Austin, TX 78732"}, {"price": 399000.0, "area": 853.0, "bed": 2.0, "Address": "2948 Eckert St, Austin, TX 78722"}, {"price": 599000.0, "area": 2031.0, "bed": 3.0, "Address": "6207 John Chisum Ln, Austin, TX 78749"}, {"price": 495000.0, "area": 1845.0, "bed": 4.0, "Address": "5816 Abilene Trl, Austin, TX 78749"}, {"price": 870000.0, "area": 2548.0, "bed": 4.0, "Address": "5902 Dunbury Dr, Austin, TX 78723"}, {"price": 19500000.0, "area": 15394.0, "bed": 6.0, "Address": "12400 Cedar St, Austin, TX 78732"}, {"price": 569999.0, "area": 1359.0, "bed": 3.0, "Address": "903 Acorn Oaks Dr, Austin, TX 78745"}, {"price": 600000.0, "area": 1036.0, "bed": 2.0, "Address": "4507 Avenue D, Austin, TX 78751"}, {"price": 320000.0, "area": 1200.0, "bed": 3.0, "Address": "16822 Whitebrush Loop, Austin, TX 78717"}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
<p>The average housing price per suqare feet in Austin is around xxx, as indicated by the chart, whcih is relatively higher than the U.S. average.</p>
<div class="cell" data-tags="[]" data-execution_count="10">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#! echo: true</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#! code-fold: true</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>price <span class="op">=</span> housing_geo[<span class="st">'price'</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>area <span class="op">=</span> housing_geo[<span class="st">'area'</span>]</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>plt.hist(price<span class="op">/</span>area, bins<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">'#A5DEF2'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Austin Housing Prices per square foot'</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Housing Prices per square foot'</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="1-zillow_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="tract-data" class="level2">
<h2 class="anchored" data-anchor-id="tract-data">2. Tract Data</h2>
<p>Then we extracted census tract data to provide spatial references in Austin.</p>
<div class="cell" data-execution_count="11">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pygris</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>aus_tracts <span class="op">=</span> pygris.tracts(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    state<span class="op">=</span><span class="st">"48"</span>, county<span class="op">=</span><span class="st">"453"</span>, year<span class="op">=</span><span class="dv">2021</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>aus_tracts.plot(ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'none'</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, lw<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Austin Census Tract'</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Longitude'</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Latitude'</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="1-zillow_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="census-and-demographic-data" class="level2">
<h2 class="anchored" data-anchor-id="census-and-demographic-data">3. Census and Demographic Data</h2>
<p>To gain a deeper understanding of how the surrounding neighborhood demographics and characteristics influence housing prices in Austin, we obtained census data from the Census API and spatially joiend with tract data. This data will serve as a valuable resource to explore and analyze the relationships between various demographic factors and housing prices in the area.</p>
<section id="median-income" class="level3">
<h3 class="anchored" data-anchor-id="median-income">3.1 Median Income</h3>
<p>In our analysis, we prioritized the examination of median income as the initial demographic variable. Median income is a key metric that provides valuable insights into the economic prosperity and financial health of a specific population. By focusing on median income, we aim to understand the distribution of earnings within the community and its potential impact on housing dynamics.</p>
<div class="cell" data-tags="[]" data-execution_count="24">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cenpy</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>acs <span class="op">=</span> cenpy.remote.APIConnection(<span class="st">"ACSDT5Y2021"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>income <span class="op">=</span> acs.varslike(<span class="st">"MEDIAN HOUSEHOLD INCOME"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                      by<span class="op">=</span><span class="st">"concept"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>).sort_index()</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>variables <span class="op">=</span> [</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NAME"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"B19013A_001E"</span>]</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>aus_data <span class="op">=</span> acs.query(</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    cols<span class="op">=</span>variables,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    geo_unit<span class="op">=</span><span class="st">"tract:*"</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    geo_filter<span class="op">=</span>{<span class="st">"state"</span>: <span class="st">"48"</span>, <span class="st">"county"</span>: <span class="st">"453"</span>},</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> variable <span class="kw">in</span> variables:</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> variable <span class="op">!=</span> <span class="st">"NAME"</span>:</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        aus_data[variable] <span class="op">=</span> aus_data[variable].astype(<span class="bu">float</span>)</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> pandas.merge(aus_data, aus_tracts, left_on<span class="op">=</span><span class="st">"tract"</span>, right_on<span class="op">=</span><span class="st">"TRACTCE"</span>, how<span class="op">=</span><span class="st">"right"</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> merged[<span class="st">'B19013A_001E'</span>] <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> merged[mask]</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> merged.rename(columns<span class="op">=</span>{<span class="st">"B19013A_001E"</span> : <span class="st">"median_income"</span>})</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>merged.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NAME_x</th>
<th data-quarto-table-cell-role="th">median_income</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">county</th>
<th data-quarto-table-cell-role="th">tract</th>
<th data-quarto-table-cell-role="th">STATEFP</th>
<th data-quarto-table-cell-role="th">COUNTYFP</th>
<th data-quarto-table-cell-role="th">TRACTCE</th>
<th data-quarto-table-cell-role="th">GEOID</th>
<th data-quarto-table-cell-role="th">NAME_y</th>
<th data-quarto-table-cell-role="th">NAMELSAD</th>
<th data-quarto-table-cell-role="th">MTFCC</th>
<th data-quarto-table-cell-role="th">FUNCSTAT</th>
<th data-quarto-table-cell-role="th">ALAND</th>
<th data-quarto-table-cell-role="th">AWATER</th>
<th data-quarto-table-cell-role="th">INTPTLAT</th>
<th data-quarto-table-cell-role="th">INTPTLON</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Census Tract 22.11, Travis County, Texas</td>
<td>83882.0</td>
<td>48</td>
<td>453</td>
<td>002211</td>
<td>48</td>
<td>453</td>
<td>002211</td>
<td>48453002211</td>
<td>22.11</td>
<td>Census Tract 22.11</td>
<td>G5020</td>
<td>S</td>
<td>6799964</td>
<td>0</td>
<td>+30.2742994</td>
<td>-097.6192562</td>
<td>POLYGON ((-97.63835 30.27447, -97.63727 30.276...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Census Tract 25, Travis County, Texas</td>
<td>85822.0</td>
<td>48</td>
<td>453</td>
<td>002500</td>
<td>48</td>
<td>453</td>
<td>002500</td>
<td>48453002500</td>
<td>25</td>
<td>Census Tract 25</td>
<td>G5020</td>
<td>S</td>
<td>3419935</td>
<td>0</td>
<td>+30.4166759</td>
<td>-097.7551447</td>
<td>POLYGON ((-97.76760 30.41209, -97.76753 30.412...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Census Tract 24.36, Travis County, Texas</td>
<td>53214.0</td>
<td>48</td>
<td>453</td>
<td>002436</td>
<td>48</td>
<td>453</td>
<td>002436</td>
<td>48453002436</td>
<td>24.36</td>
<td>Census Tract 24.36</td>
<td>G5020</td>
<td>S</td>
<td>57384988</td>
<td>13</td>
<td>+30.1065025</td>
<td>-097.6591614</td>
<td>POLYGON ((-97.69697 30.14765, -97.69691 30.149...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Census Tract 24.32, Travis County, Texas</td>
<td>110221.0</td>
<td>48</td>
<td>453</td>
<td>002432</td>
<td>48</td>
<td>453</td>
<td>002432</td>
<td>48453002432</td>
<td>24.32</td>
<td>Census Tract 24.32</td>
<td>G5020</td>
<td>S</td>
<td>44469976</td>
<td>14350</td>
<td>+30.1302451</td>
<td>-097.7195595</td>
<td>POLYGON ((-97.75577 30.10118, -97.75562 30.101...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Census Tract 21.12, Travis County, Texas</td>
<td>80553.0</td>
<td>48</td>
<td>453</td>
<td>002112</td>
<td>48</td>
<td>453</td>
<td>002112</td>
<td>48453002112</td>
<td>21.12</td>
<td>Census Tract 21.12</td>
<td>G5020</td>
<td>S</td>
<td>1703455</td>
<td>0</td>
<td>+30.3139236</td>
<td>-097.6825978</td>
<td>POLYGON ((-97.69126 30.31622, -97.69081 30.316...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Next we joined the housing locations to the demographic dataset, with the two inforamtion layered, we can observe certain patterns.</p>
<div class="cell" data-tags="[]" data-execution_count="15">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Join housisng data to the tract it belongs to</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> gpd.GeoDataFrame(merged, geometry <span class="op">=</span> <span class="st">'geometry'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>housing_geo.crs <span class="op">=</span> <span class="st">"EPSG:4326"</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> merged.to_crs(housing_geo.crs)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>housing_dem_geo <span class="op">=</span> gpd.sjoin(housing_geo, merged, how<span class="op">=</span><span class="st">"left"</span>, op<span class="op">=</span><span class="st">"within"</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#layerd with neighborhood income data</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>merged.plot(ax<span class="op">=</span>ax, </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            column<span class="op">=</span><span class="st">'median_income'</span>, </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>            cmap<span class="op">=</span><span class="st">'Blues'</span>, </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>            legend<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>            edgecolor<span class="op">=</span><span class="st">'black'</span>, </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>            linestyle<span class="op">=</span><span class="st">'-'</span>, </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>            lw<span class="op">=</span><span class="fl">0.5</span>, </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>            legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">"Median Income"</span>})</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>housing_dem_geo.plot(ax<span class="op">=</span>ax, </span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>                     column<span class="op">=</span><span class="st">'price'</span>, </span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>                     cmap<span class="op">=</span><span class="st">'RdPu'</span>, </span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>                     legend<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>                     edgecolor<span class="op">=</span><span class="st">'black'</span>, </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>                     linestyle<span class="op">=</span><span class="st">'-'</span>, </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>                     lw<span class="op">=</span><span class="fl">0.2</span>, </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>                     vmax<span class="op">=</span><span class="dv">1400000</span>, </span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>                     legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">"Price"</span>})</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Housing Price and Neighborhood Median Income'</span>)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Longitude'</span>)</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Latitude'</span>)</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>D:\ana\envs\environment\lib\site-packages\IPython\core\interactiveshell.py:3448: FutureWarning: The `op` parameter is deprecated and will be removed in a future release. Please use the `predicate` parameter instead.
  if await self.run_code(code, result, async_=asy):</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="1-zillow_files/figure-html/cell-10-output-2.png" class="img-fluid"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© CC-Nick Hand, 2023</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>